{
    "char_identity": {
        "type": "text",
        "description": "人物外貌设定",
        "hint": "填写角色的固定外貌描述，建议使用英文 Prompt 格式。例如: The subject is a young Asian girl with fair skin, dusty rose pink hair, large round eyes...",
        "default": ""
    },
    "injection_rounds": {
        "type": "int",
        "description": "连续注入轮次",
        "hint": "检测到绘图意图后，连续多少轮对话注入 Visual Context。设为 1 表示仅当前轮注入",
        "default": 1
    },
    "cooldown_seconds": {
        "type": "int",
        "description": "画图冷却时间（秒）",
        "hint": "每个用户两次画图之间的最小间隔时间，0 表示无冷却，管理员不受限制",
        "default": 0,
        "slider": { "min": 0, "max": 300, "step": 5 }
    },
    "enable_env_injection": {
        "type": "bool",
        "description": "启用环境场景注入",
        "hint": "启用后会根据关键词自动选择环境场景提示词",
        "default": true
    },
    "enable_camera_injection": {
        "type": "bool",
        "description": "启用摄影模式注入",
        "hint": "启用后会根据关键词自动选择镜头语言提示词",
        "default": true
    },
    "auto_prepend_identity": {
        "type": "bool",
        "description": "自动追加人物外貌到提示词",
        "hint": "启用后在生成绘图提示词时自动加入 char_identity 默认关闭，llm模型不读外貌的时候可以打开",
        "default": true
    },
    "proxy": {
        "type": "string",
        "description": "HTTP 代理",
        "hint": "用于访问 API 的代理地址，格式: http://127.0.0.1:7890",
        "default": ""
    },
    "draw_provider": {
        "type": "string",
        "description": "主图片生成提供商",
        "hint": "选择主要使用的图片生成服务，备用提供商将在主提供商失败时自动切换",
        "options": ["gitee", "gemini", "grok"],
        "default": "gitee"
    },
    "enable_fallback": {
        "type": "bool",
        "description": "启用备用提供商",
        "hint": "启用后，当主提供商失败时自动切换到备用提供商",
        "default": true
    },
    "fallback_models": {
        "type": "list",
        "description": "备用提供商顺序",
        "hint": "当主提供商失败时的切换顺序，可选值: gitee, gemini, grok",
        "default": ["gemini", "grok"]
    },
    "gitee_config": {
        "description": "Gitee AI 文生图配置",
        "type": "object",
        "hint": "配置 Gitee AI 文生图服务",
        "items": {
            "api_keys": {
                "description": "API 密钥池",
                "type": "list",
                "default": [],
                "hint": "Gitee AI 的 API Key 列表，支持多个轮询",
                "obvious_hint": true
            },
            "base_url": {
                "description": "Base URL",
                "type": "string",
                "default": "https://ai.gitee.com/v1",
                "hint": "可填 https://ai.gitee.com 或 https://ai.gitee.com/v1"
            },
            "model": {
                "description": "模型名称",
                "type": "string",
                "default": "z-image-turbo",
                "hint": "填写模型名称，常用: z-image-turbo, z-image-base, flux.1-dev, flux.1-schnell"
            },
            "size": {
                "description": "默认输出尺寸",
                "type": "string",
                "options": [
                    "256x256",
                    "512x512",
                    "1024x1024",
                    "2048x2048",
                    "1152x896",
                    "2048x1536",
                    "768x1024",
                    "1536x2048",
                    "2048x1360",
                    "1360x2048",
                    "1024x576",
                    "2048x1152",
                    "576x1024",
                    "1152x2048"
                ],
                "default": "1024x1024"
            },
            "negative_prompt": {
                "description": "负面提示词",
                "type": "text",
                "default": ""
            },
            "num_inference_steps": {
                "description": "推理步数",
                "type": "int",
                "default": 9,
                "slider": { "min": 1, "max": 20, "step": 1 }
            },
            "timeout": {
                "description": "超时(秒)",
                "type": "int",
                "default": 300,
                "slider": { "min": 60, "max": 600, "step": 10 }
            },
            "max_retries": {
                "description": "最大重试次数",
                "type": "int",
                "default": 2,
                "slider": { "min": 0, "max": 5, "step": 1 }
            }
        }
    },
    "gemini_config": {
        "description": "Gemini AI 文生图配置",
        "type": "object",
        "hint": "配置 Google Gemini AI 文生图服务（备用）",
        "items": {
            "api_key": {
                "description": "API 密钥",
                "type": "string",
                "default": "",
                "hint": "从 https://aistudio.google.com/apikey 获取，支持其他提供商"
            },
            "base_url": {
                "description": "Base URL",
                "type": "string",
                "default": "https://generativelanguage.googleapis.com",
                "hint": "仅填写域名，系统自动补全接口路径。默认使用原生接口，失败时回退到 OpenAI 兼容接口"
            },
            "model": {
                "description": "模型名称",
                "type": "string",
                "default": "gemini-3-pro-image-preview",
                "hint": "填写模型名称，常用: gemini-3-pro-image-preview"
            },
            "image_size": {
                "description": "图片分辨率",
                "type": "string",
                "options": ["1K", "2K", "4K"],
                "default": "1K",
                "hint": "2K/4K 分辨率仅 gemini-3 系列模型支持"
            },
            "timeout": {
                "description": "超时(秒)",
                "type": "int",
                "default": 120,
                "slider": { "min": 30, "max": 300, "step": 10 }
            }
        }
    },
    "grok_config": {
        "description": "Grok AI 配置（图片+视频）",
        "type": "object",
        "hint": "配置 Grok (x.ai) 图片和视频生成服务，共用 API Key 和服务地址",
        "items": {
            "api_key": {
                "description": "API 密钥",
                "type": "string",
                "default": "",
                "hint": "从 x.ai 获取的 API Key，或兼容网关的密钥（图片和视频共用）"
            },
            "base_url": {
                "description": "服务地址",
                "type": "string",
                "default": "https://api.x.ai",
                "hint": "OpenAI 兼容服务根地址（图片和视频共用）"
            },
            "image_model": {
                "description": "图片模型",
                "type": "string",
                "default": "grok-imagine-1.0",
                "hint": "图片生成使用的模型"
            },
            "video_model": {
                "description": "视频模型",
                "type": "string",
                "default": "grok-imagine-1.0-video",
                "hint": "视频生成使用的模型，默认 grok-imagine-1.0-video"
            },
            "size": {
                "description": "默认图片尺寸",
                "type": "string",
                "options": ["1024x1024", "2048x2048", "4096x4096"],
                "default": "1024x1024"
            },
            "timeout": {
                "description": "超时(秒)",
                "type": "int",
                "default": 180,
                "slider": { "min": 30, "max": 600, "step": 10 },
                "hint": "图片和视频生成的超时时间"
            },
            "max_retries": {
                "description": "最大重试次数",
                "type": "int",
                "default": 2,
                "slider": { "min": 0, "max": 5, "step": 1 }
            },
            "video_enabled": {
                "description": "启用视频功能",
                "type": "bool",
                "default": false,
                "hint": "启用后可使用 /视频 命令生成视频"
            },
            "video_presets": {
                "description": "视频预设提示词",
                "type": "list",
                "hint": "格式：预设名:提示词。例如：微笑:让人物微笑，表情自然",
                "default": []
            },
            "video_send_mode": {
                "description": "视频发送模式",
                "type": "string",
                "options": ["auto", "url", "file"],
                "default": "auto",
                "hint": "auto=先 URL 再文件兜底，url=仅发链接视频，file=下载后本地发送"
            },
            "max_cached_videos": {
                "description": "最大缓存视频数",
                "type": "int",
                "default": 20,
                "slider": { "min": 0, "max": 500, "step": 10 }
            }
        }
    },
    "selfie_config": {
        "description": "人像参考配置",
        "type": "object",
        "hint": "上传参考人像后，每次 Gemini 生图时会自动使用这些照片作为形象参考",
        "items": {
            "enabled": {
                "description": "启用人像参考功能",
                "type": "bool",
                "default": false,
                "hint": "启用后，使用 Gemini 生图时会自动传入 selfie_refs 目录中的参考人像（请在 WebUI 中管理参考图片）"
            }
        }
    },
    "edit_config": {
        "description": "改图功能配置",
        "type": "object",
        "hint": "配置图生图/改图功能，支持风格迁移、主体替换等",
        "items": {
            "enabled": {
                "description": "启用改图功能",
                "type": "bool",
                "default": true,
                "hint": "启用后可使用 /改图 命令进行图片编辑"
            },
            "provider": {
                "description": "改图提供商",
                "type": "string",
                "options": ["gemini", "gitee", "grok"],
                "default": "gemini",
                "hint": "选择改图使用的提供商，独立于生图主提供商，复用对应的 API Key"
            },
            "model": {
                "description": "Gitee 改图模型",
                "type": "string",
                "default": "Qwen-Image-Edit-2511",
                "hint": "Gitee 提供商使用的改图模型名称"
            },
            "gemini_model": {
                "description": "Gemini 改图模型",
                "type": "string",
                "default": "gemini-3-pro-image-preview",
                "hint": "Gemini 提供商使用的改图模型名称"
            },
            "grok_model": {
                "description": "Grok 改图模型",
                "type": "string",
                "default": "grok-imagine-1.0",
                "hint": "Grok 提供商使用的改图模型名称"
            },
            "poll_interval": {
                "description": "轮询间隔(秒)",
                "type": "int",
                "default": 5,
                "slider": { "min": 1, "max": 30, "step": 1 },
                "hint": "异步任务状态轮询间隔"
            },
            "poll_timeout": {
                "description": "轮询超时(秒)",
                "type": "int",
                "default": 300,
                "slider": { "min": 60, "max": 600, "step": 30 },
                "hint": "异步任务最大等待时间"
            },
            "presets": {
                "description": "改图预设",
                "type": "list",
                "default": ["手办化:将图片转换为精致的手办模型风格", "Q版化:将图片转换为可爱的Q版卡通风格", "赛博朋克:添加霓虹灯光和未来科技感", "水彩画:转换为柔和的水彩画艺术风格", "油画:转换为经典油画艺术风格"],
                "hint": "格式：预设名:提示词，用户发送/改图 预设名时使用"
            }
        }
    },
    "webui_config": {
        "description": "Web 管理界面配置",
        "type": "object",
        "hint": "环境场景和摄影模式请在 WebUI 中配置",
        "items": {
            "enabled": {
                "description": "启用 WebUI",
                "type": "bool",
                "default": false,
                "hint": "启用后可通过浏览器访问管理界面，配置环境场景和摄影模式"
            },
            "host": {
                "description": "监听地址",
                "type": "string",
                "default": "127.0.0.1",
                "hint": "建议保持 127.0.0.1 仅本地访问，0.0.0.0 允许外部访问需配合 token 使用"
            },
            "port": {
                "description": "端口",
                "type": "int",
                "default": 8088
            },
            "token": {
                "description": "访问令牌",
                "type": "string",
                "default": "",
                "hint": "设置后需在 URL 中添加 ?token=xxx 才能访问 WebUI，留空则无需认证"
            }
        }
    },
    "cache_config": {
        "description": "图片缓存清理配置",
        "type": "object",
        "hint": "自动清理生成的图片，收藏的图片不会被清理",
        "items": {
            "max_storage_mb": {
                "description": "最大存储空间 (MB)",
                "type": "int",
                "default": 500,
                "hint": "超过此大小时自动清理旧图片，0 表示不限制",
                "slider": { "min": 0, "max": 5000, "step": 100 }
            },
            "max_count": {
                "description": "最大图片数量",
                "type": "int",
                "default": 100,
                "hint": "超过此数量时自动清理旧图片，0 表示不限制",
                "slider": { "min": 0, "max": 1000, "step": 10 }
            }
        }
    }
}
